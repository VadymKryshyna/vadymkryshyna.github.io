import{a as u}from"./chunk-3HC3S356.js";import{lb as g}from"./chunk-PPI7W4ZX.js";import{z as w}from"./chunk-HIP4L62O.js";import{$ as f,D as m,Ja as l,Vc as d,ca as c,ia as n,m as s,n as o,r as h}from"./chunk-5OHYYUBQ.js";var a=!0,k=(()=>{class r{environment=n(g);httpClient=n(w);login(e){if(a){let t=null;if(e.email=="manager@test.com"&&e.password=="password")t={name:"Manager",email:e.email,role:u.MANAGER,startPage:"/mgr/client-list"};else if(e.email=="influencer@test.com"&&e.password=="password")t={name:"Influencer",email:e.email,role:u.INFLUENCER,startPage:"/inf/profile"};else{let p=localStorage.getItem("register_user");if(p){let i=JSON.parse(p);i.email==e.email&&i.password==e.password&&(t={name:i.firstName+" "+i.lastName,email:i.email,role:u.INFLUENCER,startPage:"/inf/onboarding"})}}if(t)return s({user:t,accessToken:"accessToken",refreshToken:"refreshToken"});o(()=>new Error("Unknown email/password"))}return this.httpClient.post(`${this.environment.apiUrl}auth/login`,e).pipe(h(t=>t))}logout(){return a?(localStorage.clear(),s(!0)):this.httpClient.get(`${this.environment.apiUrl}auth/logout`)}changePassword(e){return a?s(!0):this.httpClient.post(`${this.environment.apiUrl}auth/change-password`,e)}resetPassword(e){return a?s(!0):this.httpClient.post(`${this.environment.apiUrl}auth/reset-password`,e)}remindPassword(e){return a?s({status:1}):this.httpClient.post(`${this.environment.apiUrl}auth/remind-password`,{email:e}).pipe(h(t=>t))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var $=(()=>{class r{authenticationService=n(k);accessToken=l(null);refreshToken=l(null);user=l(null);isAuthenticated=d(()=>!!this.accessToken());login(e){return this.authenticationService.login(e).pipe(f(t=>{this.setSession(t)}),m(t=>(this.clearSession(),o(()=>t.error))))}logout(){return this.authenticationService.logout()}changePassword(e){return this.authenticationService.changePassword(e)}remindPassword(e){return this.authenticationService.remindPassword(e)}resetPassword(e){return this.authenticationService.resetPassword(e)}setSession(e){this.accessToken.set(e.accessToken),this.refreshToken.set(e.refreshToken),this.user.set(e.user)}clearSession(){this.accessToken.set(null),this.refreshToken.set(null),this.user.set(null)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();export{$ as a};
