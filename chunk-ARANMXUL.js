import{a as M}from"./chunk-6JOI5QM5.js";import{a as se,b as me}from"./chunk-QV5HBWRY.js";import{A as v,C as P,D as U,F as q,I as ie,J as A,U as G,V as y,aa as R,ba as E,ea as D,fa as z,ga as V,ia as O,kb as ae,lb as le,m as S,ta as H,u as B,ua as ne,va as re,w as f,x as F,xa as oe,y as L,z as j}from"./chunk-PPI7W4ZX.js";import{s as ee,z as te}from"./chunk-HIP4L62O.js";import{$ as Q,Bc as N,D as K,Db as u,Ga as X,Gc as a,Hc as l,Ja as _,Lb as w,Rb as c,Vb as t,Vc as T,Wb as i,Xb as g,ca as I,fc as k,gc as x,ia as h,kb as n,m as J,n as Z,sc as o,tc as d,uc as C,xb as b}from"./chunk-5OHYYUBQ.js";import"./chunk-GAL4ENT6.js";var de=!0,pe=(()=>{class e{environment=h(le);httpClient=h(te);registerEmail(r){return de?J({guid:"1234-abcd-5678-efgh"}):this.httpClient.post(`${this.environment.apiUrl}auth/initiate`,r).pipe(K(s=>Z(()=>s.error)))}registerUser(r,s){return de?(localStorage.setItem("register_user",JSON.stringify(s)),J(!0)):this.httpClient.post(`${this.environment.apiUrl}auth/register/${r}`,s)}static \u0275fac=function(s){return new(s||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var $=(()=>{class e{registrationService=h(pe);user=_(null);registerEmail(r){return this.registrationService.registerEmail(r).pipe(Q(s=>{let m={guid:s.guid,email:r.email};this.user.set(m)}))}registerUser(r,s){return this.registrationService.registerUser(r,s)}static \u0275fac=function(s){return new(s||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ce=()=>["auth/login"];function xe(e,p){if(e&1&&(t(0,"mat-error",21),o(1),i()),e&2){let r=x();n(),C(" ",r.errorMessage()," ")}}function _e(e,p){e&1&&(t(0,"mat-error",21),o(1),a(2,"translate"),i()),e&2&&(n(),C(" ",l(2,1,"Without a social media account you cannot participate in campaigns")," "))}function we(e,p){e&1&&(t(0,"div",32),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Address E-mail required")))}function be(e,p){e&1&&(t(0,"div",32),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Please provide a valid email address")))}function Se(e,p){if(e&1&&(t(0,"mat-hint",25),u(1,we,3,3,"div",32)(2,be,3,3,"div",32),i()),e&2){let r=x();n(),c(r.formControls.email.errors&&r.formControls.email.errors.required?1:-1),n(),c(r.formControls.email.errors&&r.formControls.email.errors.email?2:-1)}}function ye(e,p){e&1&&(t(0,"span",27),o(1,"loading"),i())}function Re(e,p){e&1&&(o(0),a(1,"translate")),e&2&&C(" ",l(1,1,"Next")," ")}var ue=(()=>{class e{router=h(G);registrationFacade=h($);hasSocialMediaAccount="";isLoading=_(!1);errorMessage=_(null);hasError=T(()=>!!this.errorMessage());form=new j({hasSocialMediaAccount:new v("",[f.required]),email:new v("",[f.required,f.email])});ngOnInit(){this.form.controls.email.disable()}get formControls(){return this.form.controls}changeHasSocialMediaAccount(r){this.hasSocialMediaAccount=r.value,this.hasSocialMediaAccount=="yes"?this.form.controls.email.enable():this.form.controls.email.disable()}submit(){if(this.form.markAsTouched(),this.errorMessage.set(null),this.form.invalid){this.errorMessage.set("Please fill out the form");return}this.form.value.hasSocialMediaAccount=="yes"&&(this.isLoading.set(!0),this.registrationFacade.registerEmail({email:this.form.value.email??""}).subscribe({next:r=>{this.isLoading.set(!1),this.router.navigate(["/registration/user",r.guid])},error:r=>{this.isLoading.set(!1),this.errorMessage.set(r?.[0]?.message||"Registration failed. Please try again.")}}))}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=b({type:e,selectors:[["app-register"]],decls:57,vars:31,consts:[[1,"blank-layout-container","justify-content-center"],[1,"position-relative","row","w-100","h-100"],[1,"col-lg-5"],[1,"d-flex","align-items-start","align-items-lg-center","justify-content-center","h-100"],[1,"row","justify-content-center","w-100","h-100","align-items-center"],[1,"col-lg-10","max-width-login-form"],[1,"f-w-700","f-s-28","m-t-24","m-b-8","text-center"],[1,"row","m-t-24"],[1,"col-6"],["mat-stroked-button","",1,"w-100"],[1,"d-flex","align-items-center"],["src","/assets/images/svgs/google-icon.svg","alt","google","width","16",1,"m-r-8"],["mat-stroked-button","",1,"w-100","d-flex","align-items-center"],["src","/assets/images/svgs/facebook-icon.svg","alt","facebook","width","40",1,"m-r-4"],[1,"or-border","m-t-30"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"f-w-600"],["formControlName","hasSocialMediaAccount",3,"change"],[1,"row"],["value","yes","color","primary"],["value","no","color","primary"],[1,"d-block","m-b-16","border-error","bg-light-error","text-error","p-12","rounded"],[1,"f-s-14","f-w-600","m-b-12","m-t-24","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","type","email","formControlName","email"],[1,"m-b-16","error-msg"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","m-r-8"],[1,"d-block","f-w-500","d-block","m-t-24","text-center","f-s-14"],[1,"text-sub"],[1,"text-decoration-none","text-border-dark","f-w-500","f-s-14",3,"routerLink"],[1,"col-lg-7","position-relative","overflow-hidden","bg-primary","d-none","d-lg-block"],[1,"text-error"]],template:function(s,m){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),o(7),a(8,"translate"),i(),t(9,"div",7)(10,"div",8)(11,"button",9)(12,"div",10),g(13,"img",11),o(14," Google "),i()()(),t(15,"div",8)(16,"button",12)(17,"div",10),g(18,"img",13),o(19," Facebook "),i()()()(),t(20,"div",14),o(21),a(22,"translate"),i(),t(23,"form",15),k("ngSubmit",function(){return m.submit()}),t(24,"label",16),o(25),a(26,"translate"),i(),t(27,"mat-radio-group",17),k("change",function(ve){return m.changeHasSocialMediaAccount(ve)}),t(28,"div",18)(29,"div",8)(30,"mat-radio-button",19),o(31),a(32,"translate"),i()(),t(33,"div",8)(34,"mat-radio-button",20),o(35),a(36,"translate"),i()()()(),u(37,xe,2,1,"mat-error",21)(38,_e,3,3,"mat-error",21),t(39,"mat-label",22),o(40),a(41,"translate"),i(),t(42,"mat-form-field",23),g(43,"input",24),u(44,Se,3,2,"mat-hint",25),i(),t(45,"button",26),u(46,ye,2,0,"span",27)(47,Re,2,3),i()(),t(48,"span",28)(49,"span",29),o(50),a(51,"translate"),i(),t(52,"a",30),o(53),a(54,"translate"),i()()()()()(),t(55,"div",31),g(56,"app-blank-right-logo"),i()()()),s&2&&(n(7),d(l(8,14,"Register")),n(14),d(l(22,16,"or register by email")),n(2),w("formGroup",m.form),n(2),d(l(26,18,"Do you have a social media account?")),n(6),d(l(32,20,"Yes")),n(4),d(l(36,22,"No")),n(2),c(m.hasError()?37:m.hasSocialMediaAccount=="no"?38:-1),n(3),C(" ",l(41,24,"Address E-mail")," "),n(4),c(m.formControls.email.touched&&m.formControls.email.invalid?44:-1),n(),w("disabled",!m.form.valid),n(),c(m.isLoading()?46:47),n(4),d(l(51,26,"Already have an account?")),n(2),w("routerLink",N(30,Ce)),n(),C(" ",l(54,28,"Login")," "))},dependencies:[ae,O,D,V,z,H,ne,re,S,A,P,B,F,L,U,q,y,E,R,M,ie],encapsulation:2})}return e})();var Ee=()=>["auth/login"];function Me(e,p){if(e&1&&(t(0,"mat-error",8),o(1),i()),e&2){let r=x();n(),C(" ",r.errorMessage()," ")}}function ke(e,p){e&1&&(t(0,"div",28),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"First name required")))}function Ie(e,p){if(e&1&&(t(0,"mat-hint",12),u(1,ke,3,3,"div",28),i()),e&2){let r=x();n(),c(r.formControls.firstName.errors&&r.formControls.firstName.errors.required?1:-1)}}function Ne(e,p){e&1&&(t(0,"div",28),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Last name required")))}function Te(e,p){if(e&1&&(t(0,"mat-hint",12),u(1,Ne,3,3,"div",28),i()),e&2){let r=x();n(),c(r.formControls.lastName.errors&&r.formControls.lastName.errors.required?1:-1)}}function Be(e,p){e&1&&(t(0,"div",28),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Password required")))}function Fe(e,p){e&1&&(t(0,"div",28),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Password should be min 8 character")))}function Le(e,p){e&1&&(t(0,"div",28),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Password should be max 100 character")))}function je(e,p){e&1&&(t(0,"div",28),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Password pattern required")))}function Pe(e,p){if(e&1&&(t(0,"mat-hint",12),u(1,Be,3,3,"div",28)(2,Fe,3,3,"div",28)(3,Le,3,3,"div",28)(4,je,3,3,"div",28),i()),e&2){let r=x();n(),c(r.formControls.password.errors&&r.formControls.password.errors.required?1:r.formControls.password.errors&&r.formControls.password.errors.minlength?2:r.formControls.password.errors&&r.formControls.password.errors.maxlength?3:r.formControls.password.errors&&r.formControls.password.errors.pattern?4:-1)}}function Ue(e,p){e&1&&(t(0,"mat-error",15),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"The passwords are not identical")))}function qe(e,p){e&1&&(t(0,"div",28),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Required")))}function Ae(e,p){if(e&1&&(t(0,"mat-hint",12),u(1,qe,3,3,"div",28),i()),e&2){let r=x();n(),c(r.formControls.repeatPassword.errors&&r.formControls.repeatPassword.errors.required?1:-1)}}function Ge(e,p){e&1&&(t(0,"mat-error",15),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Required")))}function De(e,p){e&1&&(t(0,"mat-error",15),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Required")))}function ze(e,p){e&1&&(t(0,"mat-error",15),o(1),a(2,"translate"),i()),e&2&&(n(),d(l(2,1,"Required")))}var fe=(()=>{class e{guid=X();router=h(G);registrationFacade=h($);isLoading=_(!1);errorMessage=_(null);hasError=T(()=>!!this.errorMessage());form=new j({email:new v("",[f.required,f.email]),firstName:new v("",[f.required]),lastName:new v("",[f.required]),password:new v("",[f.required,f.minLength(8),f.maxLength(100),f.pattern(se)]),repeatPassword:new v("",[f.required]),acceptRule:new v(!1,[f.requiredTrue]),acceptRodo:new v(!1,[f.requiredTrue]),acceptNotification:new v(!1,[f.requiredTrue])},{validators:[me]});get formControls(){return this.form.controls}get hasMismatchedPasswords(){return this.form.errors?.passwordMismatch&&this.formControls.repeatPassword.touched}ngOnInit(){if(!this.guid)this.router.navigateByUrl("/registration");else{let r=this.registrationFacade.user()?.email;r||(r="test@test.com"),this.form.patchValue({email:r})}}get acceptRuleFalse(){return this.formControls.acceptRule.touched&&!this.form.value.acceptRule}get acceptRodoFalse(){return this.formControls.acceptRodo.touched&&!this.form.value.acceptRodo}get acceptNotificationFalse(){return this.formControls.acceptNotification.touched&&!this.form.value.acceptNotification}submit(){if(this.form.markAsTouched(),this.errorMessage.set(null),this.form.invalid){this.form.value.acceptRule?this.form.value.acceptRodo?this.form.value.acceptNotification?this.errorMessage.set("Please fill out the form"):this.errorMessage.set("Please accept notifications"):this.errorMessage.set("Please accept RODO"):this.errorMessage.set("Please accept rules");return}let r=this.guid()??this.registrationFacade.user()?.guid??"";this.isLoading.set(!0),this.registrationFacade.registerUser(r,this.form.value).subscribe({next:s=>{this.isLoading.set(!1),s?this.router.navigateByUrl("/registration/confirmation"):window.alert("Something went wrong")},error:s=>{this.isLoading.set(!1),this.errorMessage.set(s?.[0]?.message||"Login failed. Please try again.")}})}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=b({type:e,selectors:[["app-register-user"]],inputs:{guid:[1,"guid"]},decls:64,vars:36,consts:[[1,"blank-layout-container","justify-content-center"],[1,"position-relative","row","w-100","h-100"],[1,"col-lg-5"],[1,"d-flex","align-items-start","align-items-lg-center","justify-content-center","h-100"],[1,"row","justify-content-center","w-100","h-100","align-items-center"],[1,"col-lg-10","max-width-login-form"],[1,"f-w-700","f-s-28","m-t-24","m-b-8","text-center"],[1,"m-t-30",3,"formGroup"],[1,"d-block","m-b-16","border-error","bg-light-error","text-error","p-12","rounded"],[1,"f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","type","text","formControlName","firstName"],[1,"m-b-16","error-msg"],["matInput","","type","text","formControlName","lastName"],["matInput","","type","password","formControlName","password"],[1,"m-b-16"],["matInput","","type","password","formControlName","repeatPassword"],[1,"m-t-24"],[1,"text-center"],["href","https://instars.buzz","target","_blank"],["formControlName","acceptRule",1,"m-l-auto"],["formControlName","acceptRodo",1,"m-l-auto"],["formControlName","acceptNotification",1,"m-l-auto"],["mat-flat-button","","color","primary",1,"w-100",3,"click"],[1,"d-block","f-w-500","d-block","m-t-24","text-center","f-s-14"],[1,"text-sub"],[1,"text-decoration-none","text-border-dark","f-w-500","f-s-14",3,"routerLink"],[1,"col-lg-7","position-relative","overflow-hidden","bg-primary","d-none","d-lg-block"],[1,"text-error"]],template:function(s,m){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),o(7),a(8,"translate"),i(),t(9,"form",7),u(10,Me,2,1,"mat-error",8),t(11,"mat-label",9),o(12),a(13,"translate"),i(),t(14,"mat-form-field",10),g(15,"input",11),u(16,Ie,2,1,"mat-hint",12),i(),t(17,"mat-label",9),o(18),a(19,"translate"),i(),t(20,"mat-form-field",10),g(21,"input",13),u(22,Te,2,1,"mat-hint",12),i(),t(23,"mat-label",9),o(24),a(25,"translate"),i(),t(26,"mat-form-field",10),g(27,"input",14),u(28,Pe,5,1,"mat-hint",12),i(),u(29,Ue,3,3,"mat-error",15),t(30,"mat-label",9),o(31),a(32,"translate"),i(),t(33,"mat-form-field",10),g(34,"input",16),u(35,Ae,2,1,"mat-hint",12),i(),t(36,"div",17)(37,"div",18)(38,"a",19),o(39,"Regulamin platformy InStars"),i()(),t(40,"mat-slide-toggle",20),o(41," Akceptuj\u0119 regulamin platformy InStars. "),i()(),u(42,Ge,3,3,"mat-error",15),t(43,"div",17)(44,"mat-slide-toggle",21),o(45," Wyra\u017Cam zgod\u0119 na przetwarzanie moich danych osobowych w celach realizacji kampanii. "),i()(),u(46,De,3,3,"mat-error",15),t(47,"div",17)(48,"mat-slide-toggle",22),o(49," Wyra\u017Cam zgod\u0119 na kontakt mailowy i telefoniczny dotycz\u0105cy nowych kampanii. "),i()(),u(50,ze,3,3,"mat-error",15),t(51,"div",17)(52,"button",23),k("click",function(){return m.submit()}),o(53),a(54,"translate"),i()()(),t(55,"span",24)(56,"span",25),o(57),a(58,"translate"),i(),t(59,"a",26),o(60),a(61,"translate"),i()()()()()(),t(62,"div",27),g(63,"app-blank-right-logo"),i()()()),s&2&&(n(7),d(l(8,19,"Register")),n(2),w("formGroup",m.form),n(),c(m.hasError()?10:-1),n(2),d(l(13,21,"First name")),n(4),c(m.formControls.firstName.touched&&m.formControls.firstName.invalid?16:-1),n(2),d(l(19,23,"Last name")),n(4),c(m.formControls.lastName.touched&&m.formControls.lastName.invalid?22:-1),n(2),d(l(25,25,"Password")),n(4),c(m.formControls.password.touched&&m.formControls.password.invalid?28:-1),n(),c(m.hasMismatchedPasswords?29:-1),n(2),d(l(32,27,"Confirm password")),n(4),c(m.formControls.repeatPassword.touched&&m.formControls.repeatPassword.invalid?35:-1),n(7),c(m.acceptRuleFalse?42:-1),n(4),c(m.acceptRodoFalse?46:-1),n(4),c(m.acceptNotificationFalse?50:-1),n(3),C(" ",l(54,29,"Register")," "),n(4),d(l(58,31,"Already have an account?")),n(2),w("routerLink",N(35,Ee)),n(),C(" ",l(61,33,"Login")," "))},dependencies:[A,P,B,F,L,U,q,D,O,V,S,H,y,z,E,R,M,oe],encapsulation:2})}return e})();var ge=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275cmp=b({type:e,selectors:[["app-confirmation"]],decls:20,vars:3,consts:[[1,"blank-layout-container","justify-content-center"],[1,"position-relative","row","w-100","h-100"],[1,"col-lg-5"],[1,"d-flex","align-items-start","align-items-lg-center","justify-content-center","h-100"],[1,"row","justify-content-center","w-100","h-100","align-items-center"],[1,"col-lg-10","max-width-login-form"],[1,"f-w-700","f-s-28","m-t-24","m-b-8","text-center"],[1,"display-flex","flex-column","align-items-center","justify-content-center","text-center"],[1,"p-b-20","p-t-20"],["src","/assets/images/influencer/medal.svg","alt","Medal","width","80","height","80"],[1,"f-s-24"],[1,"text-gray-600","p-b-30","text-center"],["mat-flat-button","","routerLink","auth/login",1,"m-r-8"],[1,"col-lg-7","position-relative","overflow-hidden","bg-primary","d-none","d-lg-block"]],template:function(s,m){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),o(7,"Zarejestruj si\u0119"),i(),t(8,"div",7)(9,"div",8),g(10,"img",9),i(),t(11,"h3",10),o(12,"Gratulujemy!"),i(),t(13,"p",11),o(14," Sprawd\u017A swoj\u0105 skrzynk\u0119 pocztow\u0105 i potwierd\u017A rejestracj\u0119 klikaj\u0105c w link, kt\xF3ry Ci wys\u0142ali\u015Bmy. "),i(),t(15,"button",12),o(16),a(17,"translate"),i()()()()()(),t(18,"div",13),g(19,"app-blank-right-logo"),i()()()),s&2&&(n(16),d(l(17,1,"Go to Login")))},dependencies:[ee,y,S,M,E,R],encapsulation:2})}return e})();var Pt=[{path:"",children:[{path:"",component:ue},{path:"user/:guid",component:fe},{path:"confirmation",component:ge}]}];export{Pt as RegistrationRoutes};
