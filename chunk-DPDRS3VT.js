import{a as G}from"./chunk-6JOI5QM5.js";import{a as y}from"./chunk-ALKBLXOG.js";import{a as J,b as oe}from"./chunk-QV5HBWRY.js";import{a as H}from"./chunk-3HC3S356.js";import{A as _,C as L,D as T,F as N,I as ee,J as I,S as te,U as B,V as z,aa as O,ba as W,ea as j,fa as D,ga as U,ia as q,kb as Z,la as ie,m as M,ta as A,u as P,w as h,x as k,y as R,z as F}from"./chunk-PPI7W4ZX.js";import"./chunk-HIP4L62O.js";import{$b as $,Db as d,Gc as p,Hc as c,Ja as C,Lb as x,Rb as l,Vb as i,Vc as S,Wb as o,Xb as u,fc as E,gc as f,ia as v,kb as n,qb as Y,ra as Q,sa as X,sc as r,tc as g,uc as w,xb as b}from"./chunk-5OHYYUBQ.js";import"./chunk-GAL4ENT6.js";function de(e,m){if(e&1&&(i(0,"mat-error",12),r(1),o()),e&2){let t=f(2);n(),w(" ",t.errorMessage()," ")}}function pe(e,m){e&1&&(i(0,"div",18),r(1,"Name is required."),o())}function ce(e,m){e&1&&(i(0,"div",18),r(1,"Name should be 6 character."),o())}function ue(e,m){if(e&1&&(i(0,"mat-hint",16),d(1,pe,2,0,"div",18)(2,ce,2,0,"div",18),o()),e&2){let t=f(2);n(),l(t.formControls.email.errors&&t.formControls.email.errors.required?1:-1),n(),l(t.formControls.email.errors&&t.formControls.email.errors.minlength?2:-1)}}function fe(e,m){if(e&1){let t=$();i(0,"div",5)(1,"div",7)(2,"div",8)(3,"h3",9),r(4,"Odzyskiwanie has\u0142a"),o(),i(5,"p",10),r(6," Wpisz adres e-mail powi\u0105zany z kontem Instars. Wy\u015Blemy Ci link weryfikacyjny w celu odzyskania has\u0142a. "),o(),i(7,"form",11),d(8,de,2,1,"mat-error",12),i(9,"mat-label",13),r(10,"E-mail"),o(),i(11,"mat-form-field",14),u(12,"input",15),d(13,ue,3,2,"mat-hint",16),o(),i(14,"button",17),E("click",function(){Q(t);let a=f();return X(a.submit())}),r(15," Wy\u015Blij E-mail "),o()()()()()}if(e&2){let t=f();n(7),x("formGroup",t.form),n(),l(t.hasError()?8:-1),n(5),l(t.formControls.email.touched&&t.formControls.email.invalid?13:-1),n(),x("disabled",!t.form.valid)}}function ge(e,m){e&1&&(i(0,"div",5)(1,"div",7)(2,"div",8)(3,"h3",9),r(4,"Odzyskiwanie has\u0142a"),o(),i(5,"p",10),r(6," Je\u015Bli adres e-mail istnieje w naszej bazie danych, otrzymasz wiadomo\u015B\u0107 e-mail z instrukcjami dotycz\u0105cymi resetowania has\u0142a. "),o()()()())}var V=function(e){return e.FORM="FORM",e.SUCCESS="SUCCESS",e}(V||{}),re=(()=>{class e{authenticationFacade=v(y);isLoading=C(!1);errorMessage=C(null);viewState=C(V.FORM);hasError=S(()=>!!this.errorMessage());isSuccessViewState=S(()=>this.viewState()===V.SUCCESS);isFormViewState=S(()=>this.viewState()===V.FORM);form=new F({email:new _("",[h.required,h.minLength(6)])});get formControls(){return this.form.controls}submit(){this.form.valid&&this.form.value.email&&(this.isLoading.set(!0),this.authenticationFacade.remindPassword(this.form.value.email).subscribe({next:()=>{this.isLoading.set(!1),this.viewState.set(V.SUCCESS)},error:t=>{this.isLoading.set(!1),this.errorMessage.set(t?.[0]??"Something went wrong")}}))}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=b({type:e,selectors:[["app-remind-password"]],decls:10,vars:2,consts:[[1,"blank-layout-container","justify-content-center"],[1,"position-relative","row","w-100","h-100"],[1,"col-lg-5"],[1,"d-flex","justify-content-between","align-items-center","row","w-100","p-16","p-r-0"],["mat-stroked-button","","color","primary","routerLink","auth/login"],[1,"d-flex","align-items-start","align-items-lg-center","justify-content-center","h-n80"],[1,"col-lg-7","position-relative","overflow-hidden","bg-primary","d-none","d-lg-block"],[1,"row","justify-content-center","w-100","h-100","align-items-center"],[1,"col-lg-10","max-width-login-form"],[1,"f-w-700","f-s-28","m-t-24","m-b-24","text-center"],[1,"f-s-14","d-block","mat-body-1","m-t-24","p-24","text-center"],[1,"m-t-30",3,"formGroup"],[1,"d-block","m-b-16","border-error","bg-light-error","text-error","p-12","rounded"],[1,"f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","email"],[1,"m-b-16","error-msg"],["mat-flat-button","","color","primary",1,"w-100",3,"click","disabled"],[1,"text-error"]],template:function(s,a){s&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),r(5," < Wr\xF3\u0107 "),o()(),d(6,fe,16,4,"div",5)(7,ge,7,0,"div",5),o(),i(8,"div",6),u(9,"app-blank-right-logo"),o()()()),s&2&&(n(6),l(a.isFormViewState()?6:-1),n(),l(a.isSuccessViewState()?7:-1))},dependencies:[M,q,U,A,j,I,L,P,k,R,T,N,z,D,G],encapsulation:2,changeDetection:0})}return e})();function xe(e,m){if(e&1&&(i(0,"mat-error",8),r(1),o()),e&2){let t=f();n(),w(" ",t.errorMessage()," ")}}function _e(e,m){e&1&&(i(0,"div",17),r(1),p(2,"translate"),o()),e&2&&(n(),g(c(2,1,"Password required")))}function be(e,m){e&1&&(i(0,"div",17),r(1),p(2,"translate"),o()),e&2&&(n(),g(c(2,1,"Password pattern required")))}function Se(e,m){if(e&1&&(i(0,"mat-hint",12),d(1,_e,3,3,"div",17)(2,be,3,3,"div",17),o()),e&2){let t=f();n(),l(t.formControls.password.errors&&t.formControls.password.errors.required?1:-1),n(),l(t.formControls.password.errors&&t.formControls.password.errors.pattern?2:-1)}}function ye(e,m){e&1&&(i(0,"mat-error",13),r(1),p(2,"translate"),o()),e&2&&(n(),g(c(2,1,"The passwords are not identical")))}function Ee(e,m){e&1&&(i(0,"div",17),r(1),p(2,"translate"),o()),e&2&&(n(),g(c(2,1,"Required")))}function Me(e,m){e&1&&(i(0,"div",17),r(1),p(2,"translate"),o()),e&2&&(n(),g(c(2,1,"Password pattern required")))}function Pe(e,m){if(e&1&&(i(0,"mat-hint",12),d(1,Ee,3,3,"div",17)(2,Me,3,3,"div",17),o()),e&2){let t=f();n(),l(t.formControls.repeatPassword.errors&&t.formControls.repeatPassword.errors.required?1:-1),n(),l(t.formControls.repeatPassword.errors&&t.formControls.repeatPassword.errors.pattern?2:-1)}}var ae=(()=>{class e{router=v(B);authenticationFacade=v(y);isLoading=C(!1);errorMessage=C(null);hasError=S(()=>!!this.errorMessage());resetPasswordToken=C(null);form=new F({password:new _("",[h.required,h.pattern(J)]),repeatPassword:new _("",[h.required,h.pattern(J)])},{validators:[oe]});constructor(t){this.resetPasswordToken.set(t.snapshot.paramMap.get("token"))}get formControls(){return this.form.controls}get hasMismatchedPasswords(){return this.form.errors?.passwordMismatch&&this.formControls.repeatPassword.touched}ngOnInit(){this.resetPasswordToken()||this.router.navigateByUrl("auth/login")}submit(){if(this.form.invalid)return;let t={token:this.resetPasswordToken()||"",password:this.form.value.password??""};this.isLoading.set(!0),this.authenticationFacade.resetPassword(t).subscribe({next:()=>{this.isLoading.set(!1),this.router.navigateByUrl("/login")},error:s=>{this.isLoading.set(!1),this.errorMessage.set(s?.[0]?.message||"Reset password failed. Please try again.")}})}static \u0275fac=function(s){return new(s||e)(Y(te))};static \u0275cmp=b({type:e,selectors:[["app-reset-password"]],decls:29,vars:18,consts:[[1,"blank-layout-container","justify-content-center"],[1,"position-relative","row","w-100","h-100"],[1,"col-lg-5"],[1,"d-flex","align-items-start","align-items-lg-center","justify-content-center","h-100"],[1,"row","justify-content-center","w-100","h-100","align-items-center"],[1,"col-lg-10","max-width-login-form"],[1,"f-w-700","f-s-28","m-t-24","m-b-8","text-center"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"d-block","m-b-16","border-error","bg-light-error","text-error","p-12","rounded"],[1,"f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","type","password","formControlName","password"],[1,"m-b-16","error-msg"],[1,"m-b-16"],["matInput","","type","password","formControlName","repeatPassword"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"],[1,"col-lg-7","position-relative","overflow-hidden","bg-primary","d-none","d-lg-block"],[1,"text-error"]],template:function(s,a){s&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),r(7),p(8,"translate"),o(),i(9,"form",7),E("ngSubmit",function(){return a.submit()}),d(10,xe,2,1,"mat-error",8),i(11,"mat-label",9),r(12),p(13,"translate"),o(),i(14,"mat-form-field",10),u(15,"input",11),d(16,Se,3,2,"mat-hint",12),o(),d(17,ye,3,3,"mat-error",13),i(18,"mat-label",9),r(19),p(20,"translate"),o(),i(21,"mat-form-field",10),u(22,"input",14),d(23,Pe,3,2,"mat-hint",12),o(),i(24,"button",15),r(25),p(26,"translate"),o()()()()()(),i(27,"div",16),u(28,"app-blank-right-logo"),o()()()),s&2&&(n(7),g(c(8,10,"Reset password")),n(2),x("formGroup",a.form),n(),l(a.hasError()?10:-1),n(2),g(c(13,12,"Password")),n(4),l(a.formControls.password.touched&&a.formControls.password.invalid?16:-1),n(),l(a.hasMismatchedPasswords?17:-1),n(2),g(c(20,14,"Confirm password")),n(4),l(a.formControls.repeatPassword.touched&&a.formControls.repeatPassword.invalid?23:-1),n(),x("disabled",!a.form.valid),n(),w(" ",c(26,16,"Reset")," "))},dependencies:[Z,q,j,U,D,A,M,W,O,G,I,L,P,k,R,T,N],encapsulation:2})}return e})();function ke(e,m){if(e&1&&(i(0,"mat-error",16),r(1),o()),e&2){let t=f();n(),w(" ",t.errorMessage()," ")}}function Re(e,m){e&1&&(i(0,"div",31),r(1),p(2,"translate"),o()),e&2&&(n(),g(c(2,1,"Name is required")))}function Fe(e,m){e&1&&(i(0,"div",31),r(1),p(2,"translate"),o()),e&2&&(n(),g(c(2,1,"Name should be 6 character")))}function Le(e,m){if(e&1&&(i(0,"mat-hint",20),d(1,Re,3,3,"div",31)(2,Fe,3,3,"div",31),o()),e&2){let t=f();n(),l(t.formControls.email.errors&&t.formControls.email.errors.required?1:-1),n(),l(t.formControls.email.errors&&t.formControls.email.errors.minlength?2:-1)}}function Te(e,m){e&1&&(i(0,"div",31),r(1),p(2,"translate"),o()),e&2&&(n(),g(c(2,1,"Password is required")))}function Ne(e,m){if(e&1&&(i(0,"mat-hint",20),d(1,Te,3,3,"div",31),o()),e&2){let t=f();n(),l(t.formControls.password.errors&&t.formControls.password.errors.required?1:-1)}}function Ie(e,m){e&1&&(i(0,"span",26),r(1,"loading"),o())}function Be(e,m){e&1&&(r(0),p(1,"translate")),e&2&&w(" ",c(1,1,"Login")," ")}var se=(()=>{class e{router=v(B);authenticationFacade=v(y);form=new F({email:new _("",[h.required,h.minLength(6)]),password:new _("",[h.required]),rememberMe:new _(!1,[])});isLoading=C(!1);errorMessage=C(null);hasError=S(()=>!!this.errorMessage());get formControls(){return this.form.controls}submit(){this.errorMessage.set(null);let{email:t,password:s}=this.form.value;if(!this.form.valid||!t||!s){this.errorMessage.set("Please fill out the form");return}this.isLoading.set(!0),this.authenticationFacade.login(this.form.value).subscribe({next:()=>{this.isLoading.set(!1);let a=this.getAfterLoginNavigateUrl();this.router.navigateByUrl(a)},error:a=>{this.isLoading.set(!1),this.errorMessage.set(a?.[0]?.message||"Login failed. Please try again.")}})}getAfterLoginNavigateUrl(){let t=this.getReturnUrlOrNull();return this.isReturnUrl(t)?t:this.authenticationFacade.user()?.startPage?this.authenticationFacade.user()?.startPage:this.authenticationFacade.user()?.role==H.MANAGER?"mgr":this.authenticationFacade.user()?.role==H.INFLUENCER?"inf":"/"}getReturnUrlOrNull(){let s=this.router.routerState.snapshot.root.queryParams.returnUrl||"";return s.length?s:null}isReturnUrl(t){return!!t&&t!=="/auth/login"}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=b({type:e,selectors:[["app-login"]],decls:50,vars:12,consts:[[1,"blank-layout-container","justify-content-center"],[1,"position-relative","row","w-100","h-100"],[1,"col-lg-5"],[1,"d-flex","align-items-start","align-items-lg-center","justify-content-center","h-100"],[1,"row","justify-content-center","w-100","h-100","align-items-center"],[1,"col-lg-10","max-width-login-form"],[1,"f-w-700","f-s-28","m-t-24","m-b-8","text-center","all-round-gothic"],[1,"row","m-t-24"],[1,"col-6"],["mat-stroked-button","",1,"w-100"],[1,"d-flex","align-items-center"],["src","/assets/images/svgs/google-icon.svg","alt","google","width","16",1,"m-r-8"],["mat-stroked-button","",1,"w-100","d-flex","align-items-center"],["src","/assets/images/svgs/facebook-icon.svg","alt","facebook","width","40",1,"m-r-4"],[1,"or-border","m-t-30","f-s-14"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"d-block","m-b-16","border-error","bg-light-error","text-error","p-12","rounded"],[1,"f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","email"],[1,"m-b-16","error-msg"],["matInput","","type","password","formControlName","password"],[1,"d-flex","align-items-center","m-b-12","f-s-14"],["color","primary","formControlName","rememberMe"],["routerLink","/auth/remind-password",1,"f-w-500","text-decoration-none","m-l-auto","f-s-14","text-border-dark"],["mat-flat-button","","color","primary",1,"w-100",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","m-r-8"],[1,"d-block","f-w-500","d-block","m-t-24","text-center","f-s-14"],[1,"text-sub"],["routerLink","/registration",1,"text-decoration-none","text-border-dark","f-w-500","f-s-14"],[1,"col-lg-7","position-relative","overflow-hidden","bg-primary","d-none","d-lg-block"],[1,"text-error"]],template:function(s,a){s&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),r(7,"Zaloguj si\u0119 do Instars"),o(),i(8,"div",7)(9,"div",8)(10,"button",9)(11,"div",10),u(12,"img",11),r(13," Google "),o()()(),i(14,"div",8)(15,"button",12)(16,"div",10),u(17,"img",13),r(18," Facebook "),o()()()(),i(19,"div",14),r(20,"lub zaloguj si\u0119 loginem"),o(),i(21,"form",15),E("ngSubmit",function(){return a.submit()}),d(22,ke,2,1,"mat-error",16),i(23,"mat-label",17),r(24),p(25,"translate"),o(),i(26,"mat-form-field",18),u(27,"input",19),d(28,Le,3,2,"mat-hint",20),o(),i(29,"mat-label",17),r(30),p(31,"translate"),o(),i(32,"mat-form-field",18),u(33,"input",21),d(34,Ne,2,1,"mat-hint",20),o(),i(35,"div",22)(36,"mat-checkbox",23),r(37," Zapami\u0119taj mnie "),o(),i(38,"a",24),r(39," Zapomnia\u0142e\u015B/\u0142a\u015B has\u0142o? "),o()(),i(40,"button",25),d(41,Ie,2,0,"span",26)(42,Be,2,3),o()(),i(43,"span",27)(44,"span",28),r(45,"Nie masz konta?"),o(),i(46,"a",29),r(47," Za\u0142\xF3\u017C konto na inStars "),o()()()()()(),i(48,"div",30),u(49,"app-blank-right-logo"),o()()()),s&2&&(n(21),x("formGroup",a.form),n(),l(a.hasError()?22:-1),n(2),w(" ",c(25,8,"Email")," "),n(4),l(a.formControls.email.touched&&a.formControls.email.invalid?28:-1),n(2),w(" ",c(31,10,"Password")," "),n(4),l(a.formControls.password.touched&&a.formControls.password.invalid?34:-1),n(6),x("disabled",!a.form.valid),n(),l(a.isLoading()?41:42))},dependencies:[ee,L,P,k,R,I,T,N,Z,ie,q,j,U,D,A,M,z,G,W,O],encapsulation:2,changeDetection:0})}return e})();var le=(()=>{class e{router=v(B);authenticationFacade=v(y);ngOnInit(){this.authenticationFacade.logout().subscribe({next:()=>{this.router.navigateByUrl("auth/login")},error:t=>{console.log(t)}})}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=b({type:e,selectors:[["app-logout"]],decls:0,vars:0,template:function(s,a){},encapsulation:2})}return e})();var Mt=[{path:"",children:[{path:"remind-password",component:re},{path:"reset-password/:token",component:ae},{path:"login",component:se},{path:"logout",component:le}]}];export{Mt as AuthenticationRoutes};
